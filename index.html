<!DOCTYPE html>
<html>
<head>
<style>

body
{
	background-color: #3c3c3c;
}
table, td
{
	border-collapse:collapse;
}
table 
{
	border: 2px solid gray;
	width:200px;height:200px;

}
td
{
	border: 1px solid black;
	background-color: #505050;
	padding: 0px;
	text-align: center;
	width:66px;
	height: 66px;
	font-size: large;
}
.outer
{
	border:none;
	padding: 0px;
}
.case
{
	border:3px solid #787878;
	margin-left: 150px;
}
button
{
	border-radius:1px;
	border-color: gray;
	font-family: Candara;
	font-size: 20px;
	width: 200px;
	height: 50px;
	background-color: gray;
	margin-bottom: 50px;
}
input
{
	height: 100%;
	width: 100%;
	margin: 0px;
	padding: 0px;
	background-color:#505050;
	border: none;
	text-align: center;
}

</style>
</head>

<body>

<h1 style="text-align:center;">MySudoku</h1>



<br>

<div style="width: 900px; height: 700px; margin: auto;">
	<table class="case" style="width:600px;height:600px;z-index:0;">
	<tr>
		<td class="outer" ><table>
			<tr>
				<td id="A1">  </td>
				<td id="A2">  </td>
				<td id="A3"> </td>
			</tr>
			<tr>
				<td id="B1"> </td>
				<td id="B2"> </td>
				<td id="B3">  </td>
			</tr>
			<tr>
				<td id="C1">  </td>
				<td id="C2">  </td>
				<td id="C3"> </td>
			</tr>
		</table></td>
		<td class="outer"><table>
			<tr>
				<td id="A4">  </td>
				<td id="A5">  </td>
				<td id="A6">  </td>
			</tr>
			<tr>
				<td id="B4">  </td>
				<td id="B5">  </td>
				<td id="B6">  </td>
			</tr>
			<tr>
				<td id="C4">  </td>
				<td id="C5">  </td>
				<td id="C6">  </td>
			</tr>
		</table></td>
		<td class="outer"><table>
			<tr>
				<td id="A7"> </td>
				<td id="A8"> </td>
				<td id="A9">  </td>
			</tr>
			<tr>
				<td id="B7">  </td>
				<td id="B8">  </td>
				<td id="B9"> </td>
			</tr>
			<tr>
				<td id="C7">  </td>
				<td id="C8">  </td>
				<td id="C9">  </td>
			</tr>
		</table></td>
	</tr>
	<tr>
		<td class="outer"><table>
			<tr>
				<td id="D1">  </td>
				<td id="D2"> </td>
				<td id="D3">  </td>
			</tr>
			<tr>
				<td id="E1">  </td>
				<td id="E2">  </td>
				<td id="E3"> </td>
			</tr>
			<tr>
				<td id="F1">  </td>
				<td id="F2">  </td>
				<td id="F3">  </td>
			</tr>
		</table></td>
		<td class="outer"><table>
			<tr>
				<td id="D4">  </td>
				<td id="D5"> </td>
				<td id="D6">  </td>
			</tr>
			<tr>
				<td id="E4">  </td>
				<td id="E5">  </td>
				<td id="E6">  </td>
			</tr>
			<tr>
				<td id="F4"> </td>
				<td id="F5">  </td>
				<td id="F6">  </td>
			</tr>
		</table></td>
		<td class="outer"><table>
			<tr>
				<td id="D7">  </td>
				<td id="D8">  </td>
				<td id="D9"> </td>
			</tr>
			<tr>
				<td id="E7">  </td>
				<td id="E8">  </td>
				<td id="E9">  </td>
			</tr>
			<tr>
				<td id="F7">  </td>
				<td id="F8">  </td>
				<td id="F9"> </td>
			</tr>
		</table></td>
	</tr>
	<tr>
		<td class="outer"><table>
			<tr>
				<td id="G1">  </td>
				<td id="G2">  </td>
				<td id="G3">  </td>
			</tr>
			<tr>
				<td id="H1"> </td>
				<td id="H2">  </td>
				<td id="H3">  </td>
			</tr>
			<tr>
				<td id="I1">  </td>
				<td id="I2">  </td>
				<td id="I3"> </td>
			</tr>
		</table></td>
		<td class="outer"><table>
			<tr>
				<td id="G4">  </td>
				<td id="G5"> </td>
				<td id="G6">  </td>
			</tr>
			<tr>
				<td id="H4">  </td>
				<td id="H5">  </td>
				<td id="H6"> </td>
			</tr>
			<tr>
				<td id="I4">  </td>
				<td id="I5"> </td>
				<td id="I6"> </td>
			</tr>
		</table></td>
		<td class="outer"><table>
			<tr>
				<td id="G7"> </td>
				<td id="G8"> </td>
				<td id="G9">  </td>
			</tr>
			<tr>
				<td id="H7">  </td>
				<td id="H8">  </td>
				<td id="H9"> </td>
			</tr>
			<tr>
				<td id="I7"> </td>
				<td id="I8">  </td>
				<td id="I9"> </td>
			</tr>
		</table></td>
	</tr>
	</table>
	
	
	
	<div style="position: relative; top: -606px; width: 220px; margin-left: 800px">
		<button onclick="sort()">Start New Game</button>
		<button onclick="sort()">Restart Current Game</button>
		<button onclick="sort()">Check Solution</button>
		<button onclick="visible(1, 'instructions')">How to Play</button>
	</div>
</div>

<div id="instructions" style="width:600px; height: 700px; background-color: white; padding: 10px; position: relative; top: -700px; z-index: 5; left: 10px; visibility: hidden;">
<h2 style="text-align: center;">How to Play Sudoku!</h2>
The objective of Sudoku is to fill the entire 9x9 grid with numbers while following these two rules.<br>
<b>Rule 1:</b>Every column and row must have all digits from 1 to 9 without repeating any of them.<br>
<b>Rule 2:</b>Every 3x3 sub-grid must contain all digits from 1 to 9 without repeating any of them.<br>
Remember these rules must be applied throughout the entire game to have a correct solution.<br><br>
To enter a number into a cell, simply select the cell and use your keyboard to enter a number. <br>
Once you've filled in the entire grid you can press the <i>Check Solution</i> button to see if you are correct.<br>
<img src="https://i.imgur.com/ueQcPWT.png" style="float:right;" alt="sudoku grid">
<div style="position:relative; width:225px; top: -5px; left: 40px;"><p style="color:red;text-align:center;"><b>Each row has only the number 1 to 9 without repeating</p></div>
<div style="position:relative; width:225px; top: 50px; left: 40px;"><p style="color:DodgerBlue;text-align:center;">Each column has only the number 1 to 9 without repeating</p></div>
<div style="position:relative; width:225px; top: 220px; left: 350px;"><p style="color:MediumSeaGreen; text-align:center;">Each sub-grid has only the number 1 to 9 without repeating</b></p></div>

<div onclick="visible(0, 'instructions')"style="position:absolute; z-index: 15; right: -10px; top: -10px; background-color: white; width: 20px; height: 20px; text-align:center; border: 3px solid grey; border-radius: 20px; font-family:Candara;"><b>X</b>
</div>

</div>


<table>
	<tr>
		<td class="test">
			<input name="entry" type="number" id="test1" onblur="enter(test1)">
		</td>
		<td class="test">
			<input name="entry" type="int" id="test2" onblur="enter(test2)">
		</td>
	</tr>
	<tr>
		<td class="test">
			<input name="entry" type="int" id="test3" onblur="enter(test3)">
		</td>
		<td class="test">
			<input name="entry" type="int" id="test4" onblur="enter(test4)">
		</td>
	</tr>
</table>

<p id="test"></p>

<script>
var entries = [1, 2, 3, 4, 5, 6, 7, 8, 9];
var names = new Array(81);
var testArr = new Array(81);
var i=0;
var j=0;
var k = 0;
var a =0;
var b=0;
var c = 0;
var d=0;
var cube1 = [0, 1, 2, 9, 10, 11, 18, 19, 20];
var cube2 = [3, 4, 5, 12, 13, 14, 21, 22, 23];
var cube3 = [6, 7, 8, 15, 16, 17, 24, 25, 26];
var cube4 = [27, 28, 29, 36, 37, 38, 45, 46, 47];
var cube5 = [30, 31, 32, 39, 40, 41, 48, 49, 50];
var cube6 = [33, 34, 35, 42, 43, 44, 51, 52, 53];
var cube7 = [54, 55, 56, 63, 64, 65, 72, 73, 74];
var cube8 = [57, 58, 59, 66, 67, 68, 75, 76, 77];
var cube9 = [60, 61, 62, 69, 70, 71, 78, 79, 80];
var letters=["A", "B", "C", "D", "E", "F", "G", "H", "I"];
var solution= new Array(81);

function load()
{
	k = 0;
	for (i=0; i<entries.length; i++)
	{
		for (j=0; j<entries.length; j++)
		{
			names[k]=letters[i] + entries[j];
			solution[k] = 0;
			
			k = k + 1;
		}
	}
}
function solutionGen()
{
	entries.sort(function(a, b){return 0.5 - Math.random()}); 
	entries.sort(function(a, b){return 0.5 - Math.random()});
	entries.sort(function(a, b){return 0.5 - Math.random()});
	
	for (i=0; i < entries.length; i++) // fills first square
	{
		j = cube1[i];
		solution[j] = entries[i];
	}
	
	entries.sort(function(a, b){return 0.5 - Math.random()}); 
	entries.sort(function(a, b){return 0.5 - Math.random()});
	entries.sort(function(a, b){return 0.5 - Math.random()});
	entries.sort(function(a, b){return 0.5 - Math.random()});
	
	for (i=0; i < entries.length; i++) // fills fifth square
	{
		j = cube9[i];
		solution[j] = entries[i];
	}
	entries.sort(function(a, b){return 0.5 - Math.random()}); 
	entries.sort(function(a, b){return 0.5 - Math.random()});
	entries.sort(function(a, b){return 0.5 - Math.random()});
	
	for (i=0; i < entries.length; i++) // fills ninth square
	{
		j = cube5[i];
		solution[j] = entries[i];
	}
	
	entries.sort(function(a, b){return 0.5 - Math.random()});
	entries.sort(function(a, b){return 0.5 - Math.random()}); // randomizes array again 

	for( k=0; k<9; k++)
	{
		a = (Math.floor(k/3))*9; // 3 possibilities; k = 0, k = 9, k = 18
		b = (k%3); // 3 possibilities "
		
		for (i=0; i<9; i++)
		{
			if ( entries[i]!= solution[a] && entries[i]!= solution[a+1] && entries[i]!= solution[a+2] && entries[i] != solution[b+30] && entries[i]!= solution[b+39] && entries[i]!= solution[b+48])
			{
				j = cube2[k]; 
				if (solution[j]==0)
				{
					solution[j] = entries[i];
				} else
				{
					solution[j] = solution[j] + "" + entries[i];
				}
				
			}
			if ( entries[i]!= solution[a] && entries[i]!= solution[a+1] && entries[i]!= solution[a+2] && entries[i] != solution[b+60] && entries[i]!= solution[b+69] && entries[i]!= solution[b+78])
			{
				j = cube3[k]; 
				if (solution[j]==0)
				{
					solution[j] = entries[i];
				} else
				{
					solution[j] = solution[j] + "" + entries[i];
				}
				
			}
			if ( entries[i]!= solution[a+30] && entries[i]!= solution[a+31] && entries[i]!= solution[a+32] && entries[i] != solution[b] && entries[i]!= solution[b+9] && entries[i]!= solution[b+18])
			{
				j = cube4[k]; 
				if (solution[j]==0)
				{
					solution[j] = entries[i];
				} else
				{
					solution[j] = solution[j] + "" + entries[i];
				}
				
			}
			if ( entries[i]!= solution[a+30] && entries[i]!= solution[a+31] && entries[i]!= solution[a+32] && entries[i] != solution[b+60] && entries[i]!= solution[b+69] && entries[i]!= solution[b+78])
			{
				j = cube6[k]; 
				if (solution[j]==0)
				{
					solution[j] = entries[i];
				} else
				{
					solution[j] = solution[j] + "" + entries[i];
				}
				
			}
			if ( entries[i]!= solution[a+60] && entries[i]!= solution[a+61] && entries[i]!= solution[a+62] && entries[i] != solution[b] && entries[i]!= solution[b+9] && entries[i]!= solution[b+18])
			{
				j = cube7[k]; 
				if (solution[j]==0)
				{
					solution[j] = entries[i];
				} else
				{
					solution[j] = solution[j] + "" + entries[i];
				}
				
			}
			if ( entries[i]!= solution[a+60] && entries[i]!= solution[a+61] && entries[i]!= solution[a+62] && entries[i] != solution[b+30] && entries[i]!= solution[b+39] && entries[i]!= solution[b+48])
			{
				j = cube8[k]; 
				if (solution[j]==0)
				{
					solution[j] = entries[i];
				} else
				{
					solution[j] = solution[j] + "" + entries[i];
				}
				
			}
		}
		
	}
	
	entries = solution.filter(truth);
	
	for (i=0; i<81; i++)
	{
		if (typeof entries[i] == "number")
		{
			entries[i] = "0";
		}	
	}
	
	j = 0;
	
	
	while (j<54) {
		
		k=9;
		for (i=0; i<81; i++)
		{
			if(entries[i].length < k && entries[i] != "0")
			{
				a = i;
				k = entries[i].length;
			}
			if (k==1)
			{
				i=81;
			}
		}
				
		k = (Math.floor(a/9))*9;
		b = (a%9);
		c = (27*(Math.floor(a/27)))+(3*((Math.floor(a/3))%3));
		
		solution[a] = entries[a].charAt(0);
		
		entries[a] = "0";
			
		for (i=0; i<9; i++)
		{
			if (c+i+(Math.floor(i/3)*6) != a)
			{
				entries[c+i+(Math.floor(i/3)*6)] = entries[c+i+(Math.floor(i/3)*6)].replace(solution[a], "");
			}
			if (k+i != a)
			{
				entries[k+i] = entries[k+i].replace(solution[a], "");
			}
			if (b != a)
			{
				entries[b] = entries[b].replace(solution[a], "");
			}
			b = b + 9; 
		}
		j = j + 1;
		
	}
	
	for (i=0; i<81; i++)
	{
		if (solution[i] == "")
		{	
			a = (Math.floor(i/9))*9;
			solution[i] = 45-Number(solution[a])-Number(solution[a+1])-Number(solution[a+2])-Number(solution[a+3])-Number(solution[a+4])-Number(solution[a+5])-Number(solution[a+6])-Number(solution[a+7])-Number(solution[a+8]);
		}
	}
}
function sort()
{
	//entries = ["1", "2", "3", "4", "5", "6", "7", "8", "9"];
	entries = [ 1, 2, 3, 4, 5, 6, 7, 8, 9];
	
	load(); // to reset values correctly and load things in
	
	solutionGen(); // generates initial solution
	
	for (i=0; i<81; i++) // converts all solution values to strings, currently a mix between strings and numbers
	{
		solution[i] = solution[i].toString();
	}
	
	checkSolve(); // checks solution for correctness, occasionally there is an issue due to algorithm, resolves in the event of that

	entries = solution.filter(truth); 
	
	displayedSolution(); // sends solution to be displayed, later on multiple functions for difficulty... maybe
	
	
	for(i=0; i<81; i++)
	{
		if(entries[i].length == 0)
		{
			document.getElementById(names[i]).innerHTML = "<input type='number' id='" + names[i] + i.toString() + "' onblur='' onfocus=''>";
		}
	}
	
	
}
function displayedSolution()
{
	for (i=0; i<12; i++)
	{
		a = Math.floor(Math.random()*41);
		b = (Math.floor(a/9))*9 + 8 - (a%9);
		d = 80 - a;
		c = (Math.floor(d/9))*9 + (a%9);
		
		entries[a] = "";
		entries[b] = "";
		entries[c] = "";
		entries[d] = ""; // removed from matrix, four possibilities

		testArr = entries.filter(truth);
		j = checkUnique();
		
		i = i-j;
		if(j==1)
		{
			entries[a] = solution[a];
			entries[b] = solution[b];
			entries[c] = solution[c];
			entries[d] = solution[d];
		}
	}

	for (i=0; i<81; i++)
	{
		document.getElementById(names[i]).innerHTML = "<b>" + entries[i] + "</b>";
	}
}
function checkUnique()
{
	var g = 0;
	var e = 0;
	var f = 0;
	var h = 0;
	
	for(h=0; h<20; h++)
	{
		for(j=0; j<81; j++)
		{	
			if(testArr[j].length != 1)
			{
				g = (Math.floor(j/9))*9;
				e = j%9;
				f = (27*(Math.floor(j/27)))+(3*((Math.floor(j/3))%3));
				
				if(testArr[j]=="")
				{
					testArr[j] = "123456789"; // fills testArr so they can be removed again
				}
				
				for(k=0; k<9; k++) // loop removes invald entries from testArr
				{
					if(g+k != j && testArr[g+k].length == 1)
					{
						testArr[j] = testArr[j].replace(testArr[g+k], "");
					}
					if(e + (9*k) != j && testArr[e + (9*k)].length == 1)
					{
						testArr[j] = testArr[j].replace(testArr[e + (9*k)], "");
					}
					if((f+k+((Math.floor(k/3))*6))!= j && testArr[f+k+((Math.floor(k/3))*6)].length == 1)
					{
						testArr[j] = testArr[j].replace(testArr[f+k+((Math.floor(k/3))*6)], "");
					}
				}
				
			}
		}
	}

	for(j=0; j<81; j++)
	{
		if(testArr[j].length != 1)
		{
			return 1;
			document.getElementById("test").innerHTML = entries;
		}
	}
	return 0;
}
function truth(value)
{
	return 1==1;
}
function checkSolve()
{
	for(i=0; i<9; i++) // checks solution for correctness
	{
		a = Number(solution[i*9]) + Number(solution[(i*9)+1]) + Number(solution[(i*9)+2]) + Number(solution[(i*9)+3]) + Number(solution[(i*9)+4]) + Number(solution[(i*9)+5]) + Number(solution[(i*9)+6]) + Number(solution[(i*9)+7]) + Number(solution[(i*9)+8]);
		b = Number(solution[i]) + Number(solution[i+9]) + Number(solution[i+18]) + Number(solution[i+27]) + Number(solution[i+36]) + Number(solution[i+45]) + Number(solution[i+54]) + Number(solution[i+63]) + Number(solution[i+72]);
		if ( a!=45 || b !=45)
		{
			sort();
		}
	}
}
function enter(enteredName)
{
	enteredName.value = enteredName.value + "ll";
	document.getElementById("test2").value = document.getElementById("E1").offsetHeight;
}
function visible(toggle, destination)
{
	if(toggle==1)
	{
		document.getElementById(destination).style.visibility = 'visible';
	}else
	{
		document.getElementById(destination).style.visibility = 'hidden';
	}
}
</script>

</body>
</html>
